Objetivo:
Crie um teste de performance com K6 para registrar um usuário, fazer login, criar produtos e realizar o checkout.

Contexto:
- O K6 já está instalado na minha máquina.
- O teste a ser criado é apenas para o fluxo principal (não preciso de fluxo alternativo ou de exceção).
- Para registrar, olhe o swagger.yaml e pesquise como funciona o POST /auth/register. Gere emails únicos usando `user${Date.now()}${__VU}${__ITER}@example.com`.
- Para logar, olhe o swagger.yaml e pesquise como funciona o POST /auth/login.
- Para criar produtos, olhe o swagger.yaml e pesquise como funciona o POST /products. Esse endpoint precisa de um token Bearer JWT que pode ser extraído do POST /auth/login na propriedade data.token. Crie 2 produtos com estoque de 100 unidades e capture os IDs retornados.
- Para fazer o checkout, olhe o swagger.yaml e pesquise como funciona o POST /checkout. Esse endpoint precisa de um token Bearer JWT. No checkout, use os IDs dos produtos criados (não use IDs fixos como 1 ou 2), com 2 unidades do primeiro produto e 1 unidade do segundo produto, usando credit_card como método de pagamento.
- O teste de performance passa quando o percentil de 95 é menor que 2 segundos.
- Esse teste deve rodar para 10 usuários virtuais com 30 segundos de duração.

Regras:
- Salve o teste dentro da pasta testes/k6/complete-flow-performance.js
- Configure a URL base usando `const BASE_URL = __ENV.BASE_URL || 'http://localhost:3000'` para permitir execução com `-e BASE_URL="url"`.
- Crie constantes para os endpoints (apenas os paths): REGISTER_ENDPOINT, LOGIN_ENDPOINT, PRODUCTS_ENDPOINT, CHECKOUT_ENDPOINT.
- Use as constantes concatenando com BASE_URL nas chamadas: `` `${BASE_URL}${REGISTER_ENDPOINT}` ``.
- Crie check do status code de sucesso contido na resposta de cada request que você fizer.
- Crie checks adicionais para validar se o token foi retornado no login, se os IDs dos produtos foram retornados e se o pedido foi criado com ID e total.
- Separe ações similares em groups usando `group()`.
- Execute os testes depois de criar e analise se o percentil do tempo de resposta atende aos requisitos e me avise quanto a checks que porventura tenham falhado.

Dicas Técnicas:
- Importe: `import http from 'k6/http'` e `import { sleep, check, group } from 'k6'`
- Configure as options do K6 com vus, duration e thresholds (p95 < 2000ms e taxa de falha < 1%)
- Use `'Content-Type': 'application/json'` em todas as requisições POST
- Use `'Authorization': 'Bearer ${token}'` quando o endpoint precisar de autenticação
- Converta objetos para JSON com `JSON.stringify()`
- Adicione `sleep(1)` entre grupos de ações para simular o pensamento do usuário
- Para executar com URL customizada: `k6 run -e BASE_URL="http://localhost:3000" testes/k6/complete-flow-performance.js`
